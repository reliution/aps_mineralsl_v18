<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="paperformat_ewaybill_temp" model="report.paperformat">
        <field name="name">Paperformat Eway-Bill</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">10</field>
        <field name="margin_bottom">10</field>
        <field name="margin_left">10</field>
        <field name="margin_right">10</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
    </record>

    <template id="report_ewaybill_template">
        <t t-foreach="docs" t-as="doc">
            <t t-call="web.basic_layout">
                <div class="page">
                    <hr class="mt-0" style="border: 1px solid black;"/>

                    <table style="width: 100%; border-collapse: collapse;">
                        <tbody>
                            <tr style="width: 70%;">
                                <td style="text-align: center; vertical-align: middle;">
                                    <h2>e-way Bill</h2>
                                </td>
                                <td style="width: 30%; margin: 0; text-align: center; vertical-align: middle;">
                                    <img t-att-src="'/report/barcode/?barcode_type=%s&amp;value=%s&amp;width=%s&amp;height=%s' %('QR', doc.ewaybill_qr_data(), 150, 150)"
                                         style="max-height: 180px;margin: 0;"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <hr style="border: 1px solid black;"/>
                    <h6>1- E-Way Bill Details</h6>
                    <div style="font-size:11.5px">
                        <div class="row mt-3" style="text-align:left;">
                            <div class="col-3 ml-3">
                                <p>E-way Bill No. :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('ewayBillNo') or ''"/>
                                </p>
                            </div>
                            <div class="col-3 px-0">
                                <p>Generated Date :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('ewayBillDate') or ''"/>
                                </p>
                            </div>
                            <div class="col-3">
                                <p>Generated By :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('fromGstin') or ''"/>
                                </p>
                            </div>
                            <div class="col-3 px-0">
                                <p>Valid Upto :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('validUpto') or ''"/>
                                </p>
                            </div>
                        </div>
                        <div class="row mt-3" style="text-align:left;">
                            <div class="col-3 ml-3">
                                <p>Mode :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('transMode') or '-'"/>
                                </p>
                            </div>
                            <div class="col-3 px-0">
                                <p>Approx Distance :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('transDistance') or '0'"/>km
                                </p>
                            </div>
                        </div>

                        <div class="row mt-3" style=" text-align:left;">
                            <div class="col-3 ml-3">
                                <p>Type :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('Type') or '-'"/>
<!--                                    - Supply-->
                                    - <t t-esc="doc.prepare_ewaybill_report_data().get('subSupplyType') or '-'"/>
                                </p>
                            </div>
                            <div class="col-6 px-0">
                                <p>Document Details :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('docNo') or '0'"/>
                                    -
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('docDate') or '0'"/>
                                </p>
                            </div>
                            <div class="col-3 px-0">
                                <p>Transaction Type :
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('transactionType') or '0'"/>
                                </p>
                            </div>
                        </div>
                    </div>


                    <!--                        Address details-->

                    <hr style="border: 1px solid black;"/>
                    <h6>2- Address Details</h6>
                    <div style="font-size:13px">
                        <div class="row mt-4" style="margin-bottom: 20px; ">
                            <div class="col-6">
                                <!-- From Details -->
                                <p style="text-align: left;  margin-bottom: 10px;">From</p>
                                <div style="border:1px solid black; padding:3px;">
                                    <div style="margin-bottom: 5px;">
                                        <span>GSTIN:</span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromGstin') or ''"/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('actFromStateCode') or ''"/>
                                            -
                                        </span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromTrdName') or ''"/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span style="text-transform: capitalize;">
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromStateCode') or ''"/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>::Dispatch From::</span>

                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromAddr1') or ''"/>,
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromPlace') or ''"/>,
                                        </span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromPincode') or ''"/>,
                                        </span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('fromStateCode') or ''"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <!-- To Details -->
                            <div class="col-6 ml-1">
                                <p style="text-align: left; margin-bottom: 10px;">
                                    To
                                </p>
                                <div style="border:1px solid black; padding:3px;">
                                    <div style="margin-bottom: 5px;">
                                        <span>GSTIN:</span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toGstin') or ''"/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('actToStateCode') or ''"/>-
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toTrdName') or ''"/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span style="text-transform: capitalize;">
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toStateCode') or ''"/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>::Ship To::</span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toAddr1') or ''"/>,
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 5px;">
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toPlace') or ''"/>,
                                        </span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toPincode') or ''"/>,
                                        </span>
                                        <span>
                                            <t t-esc="doc.prepare_ewaybill_report_data().get('toStateCode') or ''"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr style="border-color: black;"/>

                    <h6>3- Goods Details</h6>

                    <div class="row" style="border:1px solid black; margin:1px; font-size:12px; ">
                        <div class="col-12">
                            <!-- Item List -->
                            <div class="row py-1" style="border-bottom:1px solid black;">
                                <div class="col-2 pt-2">
                                    <p>HSN Code</p>
                                </div>
                                <div class="col-3 pt-2">
                                    <p>Product Name &amp; Desc.</p>
                                </div>
                                <div class="col-2 pt-2">
                                    <p>Quantity</p>
                                </div>
                                <div class="col-2 pt-2">
                                    <p>Taxable Amount Rs.</p>
                                </div>
                                <div class="col-3">
                                    <p>Tax Rate (C+S+I+Cess+Cess Non.Advol)</p>
                                </div>
                            </div>
                            <t t-foreach="doc.prepare_ewaybill_report_data().get('itemList', [])" t-as="item">
                                <div class="row py-1">
                                    <div class="col-2">
                                        <span>
                                            <t t-esc="item.get('hsnCode') or ''"/>
                                        </span>
                                    </div>
                                    <div class="col-3">
                                        <span>
                                            <t t-esc="item.get('productName') or ''"/>
                                        </span>
                                    </div>
                                    <div class="col-2">
                                        <span>
                                            <t t-esc="item.get('quantity') or ''"/>
                                        </span>
                                        <span>
                                            <t t-esc="item.get('qtyUnit') or ''"/>
                                        </span>
                                    </div>
                                    <div class="col-2">
                                        <span>
                                            <t t-esc="item.get('taxableAmount') or ''"/>
                                        </span>
                                    </div>
                                    <div class="col-3">
                                        <span>
                                            <t t-esc="item.get('cgstRate') or '0.00'"/>+
                                            <t t-esc="item.get('sgstRate') or '0.00'"/>+
                                            <t t-esc="item.get('igstRate') or '0.00'"/>+
                                            <t t-esc="item.get('cessRate') or '0.00'"/>
                                        </span>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                    <!-- Totals Section -->
                    <div style="font-size:12px;">
                        <div class="row mt-3" style="margin-top:5px; text-align:left; ">
                            <div class="col-3">
                                <p>Tot. Taxable Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('total_tax_amt') or '0.00'"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>CGST Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('cgstValue') or '0.00'"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>SGST Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('sgstValue') or '0.00'"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>IGST Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('igstValue') or '0.00'"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>CESS Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('cessValue') or '0.00'"/>
                                </p>
                            </div>
                        </div>
                        <div class="row mt-3" style="">
                            <div class="col-3">
                                <p>CESS Non.Advol Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('cessNonAdvolValue') or '0.00'"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>Other Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('otherValue') or '0.00'"/>
                                </p>
                            </div>
                            <div class="col-3">
                                <p>Total Inv. Amt: ₹
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('totInvValue')"/>
                                </p>
                            </div>
                        </div>
                    </div>
                    <hr style="border: 1px solid black;"/>

                    <!-- Transportation Details -->
                    <h6>4- Transportation Details</h6>
                    <!--                        <div class="row">-->
                    <!--                            <div class="col-10">-->
                    <div class="row" style="font-size:12px;">
                        <div class="col-6">
                            <span>Transporter Id &amp; Name:</span>
                            <span>
                                <t t-esc="doc.prepare_ewaybill_report_data().get('transporterId') or ''"/> &amp;
                            </span>
                            <span>
                                <t t-esc="doc.prepare_ewaybill_report_data().get('transporterName') or ''"/>
                            </span>
                        </div>
                        <div class="col-6">
                            <span>Transporter Doc. No. &amp; Date:</span>
                            <span>
                                <t t-esc="doc.prepare_ewaybill_report_data().get('transDocNo') or ''"/>&amp;
                            </span>
                            <span>
                                <t t-esc="doc.prepare_ewaybill_report_data().get('transDocDate') or ''"/>
                            </span>
                        </div>
                    </div>

                    <hr style="border: 1px solid black;"/>

                    <!-- Vehicle Details -->
                    <h6>5- Vehicle Details</h6>
                    <div class="row py-3" style="border:1px solid black; margin:1px; font-size:12px; vertical-align: middle;">
                        <div class="col-12">
                            <div class="row" style="border-bottom:1px solid black;">
                                <div class="col-1 ml-1" style="padding: 0px 5px;">
                                    <p>Mode</p>
                                </div>
                                <div class="col-2">
                                    <p>Vehicle / Trans Doc No &amp; Dt.</p>
                                </div>
                                <div class="col-1">
                                    <p>From</p>
                                </div>
                                <div class="col-2">
                                    <p>Entered Date</p>
                                </div>
                                <div class="col-2 px-0">
                                    <p>Entered By</p>
                                </div>
                                <div class="col-2">
                                    <p>CEWB NO. (if any)</p>
                                </div>
                                <div class="col-2">
                                    <p>Multi Veh.Info (if any)</p>
                                </div>
                            </div>
                            <div class="row" style="margin-top:8px;">
                                <div class="col-1 ml-1" style="padding: 0px 5px;">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('transMode') or '-'"/>
                                    </span>
                                </div>
                                <div class="col-2">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('vehicleNo') or '-'"/>
                                    </span>
                                </div>
                                <div class="col-1">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('fromPlace') or '-'"/>
                                    </span>
                                </div>
                                <div class="col-2">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('transDocDate') or '-'"/>
                                    </span>
                                </div>
                                <div class="col-2 px-0">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('transporterId') or '-'"/>
                                    </span>
                                </div>
                                <div class="col-2">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('cewbNo') or '-'"/>
                                    </span>
                                </div>
                                <div class="col-2">
                                    <span>
                                        <t t-esc="doc.prepare_ewaybill_report_data().get('multiVehInfo') or '-'"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr style="border: 1px solid black;"/>
                    <table style="width: 100%; border-collapse: collapse; letter-spacing: 5px;">
                        <tbody>
                            <tr>
                                <td style="padding: 10px; text-align: center; vertical-align: middle;">
                                    <t t-esc="doc.prepare_ewaybill_report_data().get('ewayBillNo') or ''"
                                       t-options="{'widget': 'barcode', 'humanreadable': 1, 'width': 600, 'height': 100, 'img_style': 'width:40%;height:60%;'}"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>

    </template>

    <record id="action_invoice_report_ewaybill" model="ir.actions.report">
        <field name="name">E-Way Bill Report</field>
        <field name="model">account.move</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">rcs_alankit_eway_bill.report_ewaybill_template</field>
        <field name="report_file">rcs_alankit_eway_bill.report_ewaybill_template</field>
        <field name="print_report_name">'E-Way Bill Report - %s' % (object.name)</field>
        <field name="paperformat_id" ref="rcs_alankit_eway_bill.paperformat_ewaybill_temp"/>
<!--        <field name="binding_model_id" ref="account.model_account_move"/>-->
        <field name="binding_model_id" eval="False"/>
    </record>

    <record id="action_stock_report_ewaybill" model="ir.actions.report">
        <field name="name">E-Way Bill Report</field>
        <field name="model">stock.picking</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">rcs_alankit_eway_bill.report_ewaybill_template</field>
        <field name="report_file">rcs_alankit_eway_bill.report_ewaybill_template</field>
        <field name="print_report_name">'E-Way Bill Report - %s' % (object.name)</field>
        <field name="paperformat_id" ref="rcs_alankit_eway_bill.paperformat_ewaybill_temp"/>
<!--        <field name="binding_model_id" ref="stock.model_stock_picking"/>-->
        <field name="binding_model_id" eval="False"/>
    </record>

</odoo>

